old_teams = [

  ["secret","Owners",null]
  ["secret","Accounts Admin","admin access to Accounts"]
  ["secret","Accounts Dev",""]
  ["secret","Action Interceptor","action_interceptor dev"]
  ["secret","alina-kim-team-by-phil",""]
  ["secret","BigLearn Admin",""]
  ["secret","BigLearn Demos Admin",""]
  ["secret","BigLearn-Algs Admin",""]
  ["secret","biglearn-algs read",""]
  ["secret","biglearn-platform-read",""]
  ["secret","dev-read-common","Read access to common projects useful for everyone"]
  ["closed","DMS","Digital Media Specialists"]
  ["secret","docs-admin","admin access to docs"]
  ["secret","docs-write","Write access to OpenStax docs"]
  ["secret","Exchange Admin",""]
  ["secret","exchange-ruby write",""]
  ["secret","Exercises-Push",null]
  ["secret","js-admin","Team with admin access to JS repositories"]
  ["secret","labs write",""]
  ["closed","OpenStax Site","Access to OpenStax Site Repositories"]
  ["secret","OS Api Push",""]
  ["secret","research-admin",""]
  ["closed","research-readwrite","Research Team Members - Non Admin"]
  ["closed","Software Test",""]
  ["secret","sortability-admin",""]
  ["closed","sustain-1",""]
  ["secret","Tutor Push",null]
  ["secret","tutor-be-dev","For contacting Tutor BE devs"]

]

old_users = {

  "Accounts Admin": ["Dantemss","edwoodward","jpslav","karenc","reedstrm"]
  "Accounts Dev": ["Dantemss","jivewise","joemsak","jpslav","karenc","kevinburleigh75","nathanstitt","pandafulmanda","pumazi","reedstrm"]
  "Action Interceptor": ["Dantemss","jpslav"]
  "BigLearn Admin": ["aew2","aw30","Dantemss","jivewise","joemsak","jpslav","karenc","kathi-fletcher","kevinburleigh75","kjdav","m1yag1","NormWoody","pandafulmanda","pgrimald","philschatz","pumazi"]
  "BigLearn Demos Admin": ["aew2","jpslav"]
  "BigLearn-Algs Admin": ["aew2","shivaprakashtr"]
  "DMS": ["aw30","Bkblodget","brittweinstein","lwtchu","openstaxalina","oscryan"]
  "Exchange Admin": ["Dantemss","jpslav"]
  "Exercises-Push": ["Dantemss","jpslav"]
  "OS Api Push": ["Dantemss","edwoodward","jpslav","karenc"]
  "OpenStax Site": ["edwoodward","Fredasaurus","melaridi"]
  "Owners": ["cnuber","dcwill","edwoodward","jpslav","kathi-fletcher","kevinburleigh75","philschatz","reedstrm"]
  "Software Test": ["gregfitch","kajalp","reedstrm"]
  "Tutor Push": ["Dantemss","joemsak","jpslav","kathi-fletcher","kjdav","nathanstitt","philschatz"]
  "alina-kim-team-by-phil": ["kjdav","openstaxalina","philschatz"]
  "biglearn-algs read": ["aw30","Dantemss","kathi-fletcher","kjdav","philschatz","staxbot"]
  "biglearn-platform-read": ["aew2","aw30","cnuber","gregfitch","joemsak","jpslav","karenc","kevinburleigh75","m1yag1","openstax-biglearn","pandafulmanda","pumazi","rich-hart","staxbot"]
  "dev-read-common": ["aew2","clf6","Dantemss","gregfitch","jivewise","jpslav","kathi-fletcher","kevinburleigh75","kjdav","pgrimald","philschatz","staxbot"]
  "docs-admin": ["aw30","cnuber","Dantemss","gregfitch","joemsak","jpslav","kathi-fletcher","kevinburleigh75","kjdav","nathanstitt","philschatz","pumazi"]
  "docs-write": ["jpslav","kjdav"]
  "exchange-ruby write": ["Dantemss","jpslav","kevinburleigh75","philschatz"]
  "js-admin": ["dak","darrenmason","Fredasaurus","jivewise","jpslav","nathanstitt","pandafulmanda","philschatz","RoyEJohnson"]
  "labs write": ["AliciaChang","clf6","JasminSilva","jpslav","m1yag1"]
  "research-admin": ["aew2","debshila","heathersee","jpslav","pgrimald"]
  "research-readwrite": ["AliciaChang","cnuber","pgrimald","sl29"]
  "sortability-admin": ["Dantemss","jpslav","kevinburleigh75"]
  "sustain-1": ["edwoodward","karenc","pandafulmanda"]
  "tutor-be-dev": ["Dantemss","joemsak","jpslav","karenc","kevinburleigh75","nathanstitt","staxbot"]
}

old_repos = {

  "Accounts Admin": ["accounts","openstax-cms"]
  "Accounts Dev": ["accounts","accounts-rails","connect-rails","openstax-cms"]
  "Action Interceptor": ["action_interceptor"]
  "BigLearn Admin": ["biglearn-algs","biglearn-common","biglearn-demos","biglearn-deployment","biglearn-platform","digital-logic-textbook","hsp-labs","labs","resque-status"]
  "BigLearn Demos Admin": []
  "BigLearn-Algs Admin": ["biglearn-algs","digital-logic-textbook","labs"]
  "DMS": ["docs","tutor-deployment","tutor-deployment"]
  "Exchange Admin": ["exchange","tutor-deployment","tutor-deployment","tutor-deployment","tutor-deployment"]
  "Exercises-Push": ["exercises"]
  "OS Api Push": ["openstax_api"]
  "OpenStax Site": ["openstax-cms","os-webview"]
  "Owners": ["accounts","accounts-rails","action_interceptor","biglearn-algs","biglearn-common","biglearn-demos","biglearn-deployment","biglearn-platform","connect-ails","deploy-manifests","digital-logic-textbook","docs","exchange","exchange-js","exchange-ruby","exercises","exercises-js","hsp-labs","labs","landing","manifestly","manifestly-sandbox","napkin-notes","old-react-bootstrap-boilerplate-js","old_tutor_3","openstax_api","openstax_cookbooks","openstax_utilities","opsworks-cookbooks","rescue_from"]
  "Software Test": ["test-automation"]
  "Tutor Push": ["exercises-js","rescue_from","tutor-js","tutor-server"]
  "alina-kim-team-by-phil": []
  "biglearn-algs read": ["biglearn-algs"]
  "biglearn-platform-read": ["biglearn-algs","biglearn-common","biglearn-platform","digital-logic-textbook","docs","docs","hsp-labs","labs","tutor-deployment","tuto-deployment","tutor-deployment"]
  "dev-read-common": ["research","research"]
  "docs-admin": ["docs","docs","docs"]
  "docs-write": ["tagging-legend"]
  "exchange-ruby write": ["exchange-ruby"]
  "js-admin": ["concept-coach","exercises-js","old-react-bootstrap-boilerplate-js","tutor-js"]
  "labs write": ["hsp-labs","labs","research","research"]
  "research-admin": ["research","research"]
  "research-readwrite": ["research"]
  "sortability-admin": ["sortability"]
  "sustain-1": ["sustain-knowledge-base"]
  "tutor-be-dev": ["jobba","rescue_from"]
}









# ------------------------------------------------
# The new team mapping file and code to generate
# ------------------------------------------------








new_teams = {
  all:      # write to public repos + oer.exports, read to deployment repos?
    [
      'Accounts Admin'
      'Accounts Dev'
      'Action Interceptor'
      'deploy-read'
      'dev-read-common'
      'DMS'
      'docs-admin'
      'docs-write'
      'Exchange Admin'
      'exchange-ruby write'
      'Exercises-Push'
      'js-admin'
      'OpenStax Site'
      'OS Api Push'
      'Software Test'
      'sortability-admin'
      'sustain-1'
      'Tutor Push'
      'tutor-be-dev'
    ]
  # biglearn: # write to biglearn repos
  #   [
  #     'BigLearn Admin'
  #     'BigLearn Demos Admin'
  #     'BigLearn-Algs Admin'
  #     'biglearn-algs read'
  #     'biglearn-platform-read'
  #   ]
  research: # write to research/labs repos
    [
      'BigLearn Admin'
      'BigLearn Demos Admin'
      'BigLearn-Algs Admin'
      'biglearn-algs read'
      'biglearn-platform-read'

      'labs write'
      'research-admin'
      'research-readwrite'
    ]
  # devops:   # write to deployment repos
  #   [
  #     
  #   ]
}




# Code to convert the old_repos/users to new_repos/users
new_repos = {}
new_users = {}
for newTeamName, oldTeamNames of new_teams
  for oldTeamName in oldTeamNames
    new_repos[newTeamName] ?= {}
    for oldTeamRepo in old_repos[oldTeamName]
      new_repos[newTeamName][oldTeamRepo] = true

    new_users[newTeamName] ?= {}
    for oldTeamUser in old_users[oldTeamName]
      new_users[newTeamName][oldTeamUser] = true

# Collapse all the objects into an array which is sorted
for key, obj of new_repos
  new_repos[key] = Object.keys(obj).sort()
for key, obj of new_users
  new_users[key] = Object.keys(obj).sort()

console.log new_repos
console.log new_users
